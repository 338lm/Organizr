function pageLoad(){"use strict";$(function(){1==$("#preloader:visible").length&&$("#preloader").fadeOut(),myLazyLoad.update()}),$(function(){!0!==bowser.mobile&&$('[data-toggle="tooltip"]').tooltip()}),$(function(){$('[data-toggle="popover"]').popover()}),$(function(){Array.prototype.slice.call(document.querySelectorAll(".js-switch"));$(".js-switch").each(function(){"true"!==$(this).attr("data-switchery")&&new Switchery($(this)[0],$(this).data())})}),$(".collapseble").on("click",function(){$(".collapseblebox").fadeToggle(350)}),$(".popup-with-form").magnificPopup({type:"inline",preloader:!0,removalDelay:500,showCloseBtn:!1,callbacks:{beforeOpen:function(){$(window).width()<700?this.st.focus=!1:this.st.focus="#name",this.st.mainClass=this.st.el.attr("data-effect")},beforeClose:function(){if(0!==$.magnificPopup.instance.currItem.inlineElement.find(".rubberBand").length&&!$.magnificPopup.instance.currItem.inlineElement.find(".rubberBand").hasClass("hidden")){var e=$.magnificPopup.instance.currItem.index;message("You forgot to save","<a class=\"mouse\" onclick=\"$('.popup-with-form').magnificPopup('open',"+e+')">Would you like to go back?</a>',activeInfo.settings.notifications.position,"#FFF","warning","5000")}}}}),$(".inline-popups").magnificPopup({removalDelay:500,closeOnBgClick:!0,showCloseBtn:!1,callbacks:{beforeOpen:function(){this.st.mainClass=this.st.el.attr("data-effect"),this.st.focus=".inline-focus"},close:function(){"undefined"!=typeof player&&(console.log("STOP STOP STOP"),player.destroy())}},midClick:!0})}function doneTypingMediaSearch(){var e=$("#mediaSearchQuery"),a=e.val(),t=e.attr("data-server");if(""==a||" "==a)return!1;switch(t){case"plex":var n="getPlexSearch";break;case"emby":n="getEmbySearch"}organizrAPI("POST","api/?v1/homepage/connect",{action:n,query:a}).success(function(e){var n=JSON.parse(e);$(".mediaSearch-div").html(buildMediaResults(n.data,t,a)),!0!==bowser.mobile&&$(".resultBox-inside").slimScroll({height:"100%",position:"right",size:"5px",color:"#dcdcdc"})}).fail(function(e){console.error("Organizr Function: API Connection Failed")})}function convertMsToMinutes(e){return!1===e||0===e||"0"===e?0:e/1e3/60}function convertMinutesToMs(e){return!1===e||0===e||"0"===e?0:1e3*e*60}var typingTimer,idleTime=0,hasCookie=!1,loginAttempts=0;$(document).ajaxComplete(function(){pageLoad()}),$(document).ready(function(){pageLoad();var e=new Clipboard(".clipboard");new Clipboard("#internal-clipboard");e.on("success",function(e){message("Clipboard",e.text,activeInfo.settings.notifications.position,"#FFF","info","5000"),e.clearSelection()});var a=$("body");$(window).scroll(function(){$(this).scrollTop()>100?$("#scroll").fadeIn():$("#scroll").fadeOut()}),$("#scroll").click(function(){return $("html, body").animate({scrollTop:0},600),!1}),$(function(){var e=function(){var e=40,t=window.innerWidth>0?window.innerWidth:this.screen.width,n=(window.innerHeight>0?window.innerHeight:this.screen.height)-1;t<768?($("div.navbar-collapse").addClass("collapse"),e=100):$("div.navbar-collapse").removeClass("collapse"),t<1170?(a.addClass("content-wrapper"),$(".sidebar-nav, .slimScrollDiv").css("overflow-x","visible").parent().css("overflow","visible")):a.removeClass("content-wrapper"),n-=e,n<1&&(n=1),n>e&&$("#page-wrapper").css("min-height",n+"px")},t=window.location,n=$("ul.nav a").filter(function(){return this.href===t||0===t.href.indexOf(this.href)}).addClass("activez").parent().parent().addClass("ok").parent();n.is("li")&&n.addClass("activezo"),$(window).ready(e),$(window).bind("resize",e)}),a.trigger("resize");setInterval(timerIncrement,6e4);hasCookie=!!getCookie("organizrToken"),$(this).mousemove(function(e){idleTime=0}),$(this).keypress(function(e){idleTime=0}),myLazyLoad=new LazyLoad({elements_selector:".lazyload"}),function(e,a,t){var n='[data-perform="panel-collapse"]',o='[data-perform="panel-dismiss"]';e(n).each(function(){var a={toggle:!1},t=e(this).closest(".panel"),n=t.find(".panel-wrapper"),o=e(this).children("i");n.length||(n=t.children(".panel-heading").nextAll().wrapAll("<div/>").parent().addClass("panel-wrapper"),a={}),n.collapse(a).on("hide.bs.collapse",function(){o.removeClass("ti-minus").addClass("ti-plus")}).on("show.bs.collapse",function(){o.removeClass("ti-plus").addClass("ti-minus")})}),e(t).on("click",n,function(a){a.preventDefault();var t=e(this).closest(".panel"),n=t.find(".panel-wrapper");e(this).children("i").toggleClass("ti-plus").toggleClass("ti-minus"),n.collapse("toggle")}),e(t).on("click",o,function(a){function t(){var a=n.parent();n.remove(),a.filter(function(){return e(this).is('[class*="col-"]')&&0===e(this).children("*").length}).remove()}a.preventDefault();var n=e(this).closest(".panel");t()})}(jQuery,window,document)}),$(".slimscrollright").slimScroll({height:"100%",position:"right",size:"5px",color:"#dcdcdc"}),$(".slimscrollsidebar").slimScroll({height:"100%",position:"left",size:"6px",color:"rgba(0,0,0,0.5)"}),!0!==bowser.mobile&&$(".inbox-center").slimScroll({height:"100%",position:"right",size:"5px",color:"#dcdcdc"}),$(".navbar-toggle").on("click",function(){$(".navbar-toggle i").toggleClass("ti-menu").addClass("ti-close")}),$(document).on("click","#to-recover",function(e){$("#loginform").slideUp(),$("#recoverform").fadeIn()}),$(document).on("click",".to-register",function(e){$("#loginform").slideUp(),$("#registerForm").removeClass("hidden"),$("#registerform").fadeIn()}),$(document).on("click","#leave-recover",function(e){$("#loginform").slideDown(),$("#recoverform").fadeOut()}),$(document).on("click","#leave-registration",function(e){$("#registerform").fadeOut(),$("#registerForm").addClass("hidden"),$("#loginform").slideDown()}),$(document).on("click",".updateNow",function(e){updateNow()}),$(document).on("click",".show-login",function(e){buildLogin()}),$(document).on("click",".depenency-item",function(e){alert($(this).attr("data-name"))}),$(document).on("click",".login-button",function(e){e.preventDefault;var a=$("#oAuth-Input").val(),t=$("#login-username-Input").val();if(""==a&&""==t)return message("Login Error"," You need to enter a Username",activeInfo.settings.notifications.position,"#FFF","warning","10000"),$("#login-username-Input").focus(),!1;loginAttempts+=1,$("#login-attempts").val(loginAttempts);var n=local("g","loggingIn");if(null==n){local("s","loggingIn",!0),$("div.login-box").block({message:'<h5><img width="20" src="plugins/images/busy.gif" /> Just a moment...</h4>',css:{color:"#fff",border:"1px solid #2cabe3",backgroundColor:"#2cabe3"}});var o=$("#loginform").serializeArray();organizrAPI("POST","api/?v1/login",o).success(function(e){var a=JSON.parse(e);1==a.data?(local("set","message","Welcome|Login Successful|success"),location.reload()):"mismatch"==a.data?($("div.login-box").unblock({}),message("Login Error"," Wrong username/email/password combo",activeInfo.settings.notifications.position,"#FFF","warning","10000"),console.error("Organizr Function: Login failed - wrong username/email/password")):"lockout"==a.data?($("div.login-box").block({message:'<h5><i class="fa fa-close"></i> Locked Out!</h4>',css:{color:"#fff",border:"1px solid #e91e63",backgroundColor:"#f44336"}}),message("Login Error"," You have been Locked out",activeInfo.settings.notifications.position,"#FFF","error","10000"),console.error("Organizr Function: Login failed - User has been locked out"),setTimeout(function(){local("r","loggingIn"),location.reload()},1e4)):"2FA"==a.data?($("div.login-box").unblock({}),$("#tfa-div").removeClass("hidden"),$("#loginform [name=tfaCode]").focus()):"2FA-incorrect"==a.data?($("div.login-box").unblock({}),$("#tfa-div").removeClass("hidden"),$("#loginform [name=tfaCode]").focus(),message("Login Error",a.data,activeInfo.settings.notifications.position,"#FFF","warning","10000")):($("div.login-box").unblock({}),message("Login Error",a.data,activeInfo.settings.notifications.position,"#FFF","warning","10000"),console.error("Organizr Function: Login failed")),local("r","loggingIn")}).fail(function(e){$("div.login-box").unblock({}),message("Login Error","API Connection Failed",activeInfo.settings.notifications.position,"#FFF","warning","10000"),console.error("Organizr Function: API Connection Failed"),local("r","loggingIn")})}}),$(document).on("click",".unlockButton",function(e){e.preventDefault;var a={password:$("#unlockPassword").val()};organizrAPI("POST","api/?v1/unlock",a).success(function(e){var a=JSON.parse(e);console.log(a),1==a.data?location.reload():"Password Incorrect"==a.data?(message("Login Error"," Wrong password",activeInfo.settings.notifications.position,"#FFF","warning","10000"),console.error("Organizr Function: Login failed - wrong password")):(message("Login Error",a.data,activeInfo.settings.notifications.position,"#FFF","warning","10000"),console.error("Organizr Function: Login failed"))}).fail(function(e){console.error("Organizr Function: Login Failed")})}),$(document).on("click",".register-button",function(e){e.preventDefault;var a=$("#registerForm").serializeArray();organizrAPI("POST","api/?v1/register",a).success(function(e){var a=JSON.parse(e);console.log(a),1==a.data?location.reload():"mismatch"==a.data?(message("Registration Error"," Wrong Registration Password",activeInfo.settings.notifications.position,"#FFF","warning","10000"),console.error("Organizr Function: Registration failed - Wrong Registration Password")):"username taken"==a.data&&(message("Registration Error"," Registration Error - Username/Email Taken",activeInfo.settings.notifications.position,"#FFF","warning","10000"),console.error("Organizr Function: Registration Failed - Username/Email Taken"))}).fail(function(e){console.error("Organizr Function: Login Failed")})}),$(document).on("click",".reset-button",function(e){e.preventDefault;var a=$("#recover-input").val();if(""!==a){var t={email:a};organizrAPI("POST","api/?v1/recover",t).success(function(e){var a=JSON.parse(e);1==a.data?(message("Recover Password"," Email Sent",activeInfo.settings.notifications.position,"#FFF","success","10000"),$("#leave-recover").trigger("click")):"an error occured"==a.data?(message("Recover Error"," User Error",activeInfo.settings.notifications.position,"#FFF","warning","10000"),console.error("Organizr Function: Recover failed - Wrong Registration Password")):"username taken"==a.data&&(message("Recover Error"," Registration Error - Username/Email Taken",activeInfo.settings.notifications.position,"#FFF","warning","10000"),console.error("Organizr Function: Recover Failed - Username/Email Taken"))}).fail(function(e){console.error("Organizr Function: Login Failed")})}else message("Recover Error","Enter Email",activeInfo.settings.notifications.position,"#FFF","warning","10000")}),$(document).on("click",".open-close",function(){$("body").toggleClass("show-sidebar")}),$(document).on("click",".editGroupButton",function(){$("#edit-group-form [name=groupName]").val($(this).parent().parent().attr("data-group")),$("#edit-group-form [name=id]").val($(this).parent().parent().attr("data-id")),$("#edit-group-form [name=groupImage]").val($(this).parent().parent().attr("data-image")),$("#edit-group-form [name=oldGroupName]").val($(this).parent().parent().attr("data-group"))}),$(document).on("click",".editGroup",function(){var e={action:"editUserGroup",api:"api/?v1/settings/user/manage/groups",id:$("#edit-group-form [name=id]").val(),groupName:$("#edit-group-form [name=groupName]").val(),groupImage:$("#edit-group-form [name=groupImage]").val(),oldGroupName:$("#edit-group-form [name=oldGroupName]").val(),messageTitle:"",messageBody:"Edited User Group "+$("#edit-group-form [name=groupName]").val(),error:"Organizr Function: User Group API Connection Failed"};if(void 0!==e.id&&""!=e.id||message("New Group Error"," Could not get Group ID",activeInfo.settings.notifications.position,"#FFF","error","5000"),void 0!==e.groupName&&""!=e.groupName||message("New Group Error"," Please set a Group Name",activeInfo.settings.notifications.position,"#FFF","warning","5000"),void 0!==e.groupImage&&""!=e.groupImage||message("New Group Error"," Please set a Group Image",activeInfo.settings.notifications.position,"#FFF","warning","5000"),""!==e.id&&""!==e.groupName&&""!==e.groupImage){var a=$.Callbacks();a.add(buildGroupManagement),settingsAPI(e,a),clearForm("#edit-group-form"),$.magnificPopup.close()}}),$(document).on("click",".changeDefaultGroup",function(){var e={action:"changeDefaultGroup",api:"api/?v1/settings/user/manage/groups",id:$(this).parent().parent().attr("data-id"),oldGroupID:$("#manageGroupTable").find("tr[data-default=true]").attr("data-group-id"),oldGroupName:$("#manageGroupTable").find("tr[data-default=true]").attr("data-group"),newGroupID:$(this).parent().parent().attr("data-group-id"),newGroupName:$(this).parent().parent().attr("data-group"),messageTitle:"",messageBody:"Changed Default Group to "+$(this).parent().parent().attr("data-group"),error:"Organizr Function: User Group API Connection Failed"},a=$.Callbacks();a.add(buildGroupManagement),settingsAPI(e,a)}),$(document).on("click",".deleteUserGroup",function(){var e=$(this);swal({title:window.lang.translate("Delete ")+e.parent().parent().attr("data-group")+"?",icon:"warning",buttons:{cancel:window.lang.translate("No"),confirm:window.lang.translate("Yes")},dangerMode:!0,confirmButtonColor:"#DD6B55"}).then(function(a){if(a){var t={action:"deleteUserGroup",api:"api/?v1/settings/user/manage/groups",id:e.parent().parent().attr("data-id"),groupID:e.parent().parent().attr("data-group-id"),groupName:e.parent().parent().attr("data-group"),messageTitle:"",messageBody:"Deleted User Group "+e.parent().parent().attr("data-group"),error:"Organizr Function: User Group API Connection Failed"},n=$.Callbacks();n.add(buildGroupManagement),settingsAPI(t,n)}})}),$(document).on("click",".addNewGroup",function(){var e={action:"addUserGroup",api:"api/?v1/settings/user/manage/groups",newGroupID:parseInt($("#manageGroupTable").find("tr[data-group-id]:nth-last-child(2)").attr("data-group-id"))+1,newGroupName:$("#new-group-form [name=groupName]").val(),newGroupImage:$("#new-group-form [name=groupImage]").val(),messageTitle:"",messageBody:"Created User Group "+$("#new-group-form [name=groupName]").val(),error:"Organizr Function: User Group API Connection Failed"};if(void 0!==e.newGroupID&&""!=e.newGroupID||message("New Group Error"," Could not get next Group ID",activeInfo.settings.notifications.position,"#FFF","error","5000"),void 0!==e.newGroupName&&""!=e.newGroupName||message("New Group Error"," Please set a Group Name",activeInfo.settings.notifications.position,"#FFF","warning","5000"),void 0!==e.newGroupImage&&""!=e.newGroupImage||message("New Group Error"," Please set a Group Image",activeInfo.settings.notifications.position,"#FFF","warning","5000"),""!==e.newGroupID&&""!==e.newGroupName&&""!==e.newGroupImage){var a=$.Callbacks();a.add(buildGroupManagement),settingsAPI(e,a),clearForm("#new-group-form"),$.magnificPopup.close()}}),$(document).on("click",".addNewUser",function(){var e={action:"addNewUser",api:"api/?v1/settings/user/manage/users",username:$("#new-user-form [name=username]").val(),email:$("#new-user-form [name=email]").val(),password:$("#new-user-form [name=password]").val(),messageTitle:"",messageBody:"Added New User: "+$("#new-user-form [name=username]").val(),error:"Organizr Function: User API Connection Failed"};if(void 0!==e.username&&""!=e.username||message("New User Error"," Please set a Username",activeInfo.settings.notifications.position,"#FFF","error","5000"),void 0!==e.email&&""!=e.email||message("New User Error"," Please set an Email",activeInfo.settings.notifications.position,"#FFF","warning","5000"),void 0!==e.password&&""!=e.password||message("New User Error"," Please set a Password",activeInfo.settings.notifications.position,"#FFF","warning","5000"),""!==e.username&&""!==e.email&&""!==e.password){var a=$.Callbacks();a.add(buildUserManagement),settingsAPI(e,a),clearForm("#new-user-form"),$.magnificPopup.close()}}),$(document).on("click",".editUserButton",function(){$("#edit-user-form [name=username]").val($(this).parent().parent().attr("data-username")),$("#edit-user-form [name=id]").val($(this).parent().parent().attr("data-id")),$("#edit-user-form [name=email]").val($(this).parent().parent().attr("data-email"))}),$(document).on("click",".editUserAdmin",function(){var e={action:"editUser",api:"api/?v1/settings/user/manage/users",id:$("#edit-user-form [name=id]").val(),username:$("#edit-user-form [name=username]").val(),email:$("#edit-user-form [name=email]").val(),password:$("#edit-user-form [name=password]").val(),messageTitle:"",messageBody:"Edited User "+$("#edit-user-form [name=username]").val(),error:"Organizr Function: API Connection Failed"};if(void 0!==e.id&&""!=e.id||message("Edit User Error"," Could not get User ID",activeInfo.settings.notifications.position,"#FFF","error","5000"),void 0!==e.username&&""!=e.username||message("Edit User Error"," Please set a Username",activeInfo.settings.notifications.position,"#FFF","warning","5000"),void 0!==e.email&&""!=e.email||message("Edit User Error"," Please set a User Email",activeInfo.settings.notifications.position,"#FFF","warning","5000"),""!==e.password&&e.password!==$("#edit-user-form [name=password2]").val()&&message("Edit User Error"," Passwords do not match!",activeInfo.settings.notifications.position,"#FFF","warning","5000"),""!==e.id&&""!==e.username&&""!==e.email){var a=$.Callbacks();a.add(buildUserManagement),settingsAPI(e,a),clearForm("#edit-user-form"),$.magnificPopup.close()}}),$(document).on("change",".userGroupSelect",function(){var e={action:"changeGroup",api:"api/?v1/settings/user/manage/users",id:$(this).parent().parent().attr("data-id"),username:$(this).parent().parent().attr("data-username"),oldGroup:$(this).parent().parent().attr("data-group"),newGroupID:$(this).find("option:selected").val(),newGroupName:$(this).find("option:selected").text(),messageTitle:"",messageBody:"User Info updated for "+$(this).parent().parent().attr("data-username"),error:"Organizr Function: User API Connection Failed"},a=$.Callbacks();a.add(buildUserManagement),settingsAPI(e,a)}),$(document).on("click",".deleteUser",function(){var e=$(this);swal({title:window.lang.translate("Delete ")+e.parent().parent().attr("data-username")+"?",icon:"warning",buttons:{cancel:window.lang.translate("No"),confirm:window.lang.translate("Yes")},dangerMode:!0,confirmButtonColor:"#DD6B55"}).then(function(a){if(a){var t={action:"deleteUser",api:"api/?v1/settings/user/manage/users",id:e.parent().parent().attr("data-id"),username:e.parent().parent().attr("data-username"),messageTitle:"",messageBody:window.lang.translate("Deleted User")+": "+e.parent().parent().attr("data-username"),error:"Organizr Function: User API Connection Failed"},n=$.Callbacks();n.add(buildUserManagement),settingsAPI(t,n)}})}),$(document).on("change",".tabGroupSelect",function(){var e={action:"changeGroup",api:"api/?v1/settings/tab/editor/tabs",id:$(this).parent().parent().attr("data-id"),tab:$(this).parent().parent().attr("data-name"),oldGroupID:$(this).parent().parent().attr("data-group-id"),newGroupID:$(this).find("option:selected").val(),newGroupName:$(this).find("option:selected").text(),messageTitle:"",messageBody:"Tab Info updated for "+$(this).parent().parent().attr("data-name"),error:"Organizr Function: Tab API Connection Failed"},a=$.Callbacks();a.add(buildTabEditor),settingsAPI(e,a)}),$(document).on("change",".tabCategorySelect",function(){var e={action:"changeCategory",api:"api/?v1/settings/tab/editor/tabs",id:$(this).parent().parent().attr("data-id"),tab:$(this).parent().parent().attr("data-name"),newCategoryID:$(this).find("option:selected").val(),newCategoryName:$(this).find("option:selected").text(),messageTitle:"",messageBody:"Tab Info updated for "+$(this).parent().parent().attr("data-name"),error:"Organizr Function: Tab API Connection Failed"},a=$.Callbacks();a.add(buildTabEditor),settingsAPI(e,a)}),$(document).on("change",".tabTypeSelect",function(){var e={action:"changeType",api:"api/?v1/settings/tab/editor/tabs",id:$(this).parent().parent().attr("data-id"),tab:$(this).parent().parent().attr("data-name"),newTypeID:$(this).find("option:selected").val(),newTypeName:$(this).find("option:selected").text(),messageTitle:"",messageBody:"Tab Info updated for "+$(this).parent().parent().attr("data-name"),error:"Organizr Function: Tab API Connection Failed"},a=$.Callbacks();a.add(buildTabEditor),settingsAPI(e,a)}),$(document).on("change",".enabledSwitch",function(){var e={action:"changeEnabled",api:"api/?v1/settings/tab/editor/tabs",id:$(this).parent().parent().attr("data-id"),tab:$(this).parent().parent().attr("data-name"),tabEnabled:$(this).prop("checked")?1:0,tabEnabledWord:$(this).prop("checked")?"On":"Off",messageTitle:"",messageBody:"Tab Info updated for "+$(this).parent().parent().attr("data-name"),error:"Organizr Function: Tab API Connection Failed"},a=$.Callbacks();a.add(buildTabEditor),settingsAPI(e,a)}),$(document).on("change",".splashSwitch",function(){var e={action:"changeSplash",api:"api/?v1/settings/tab/editor/tabs",id:$(this).parent().parent().attr("data-id"),tab:$(this).parent().parent().attr("data-name"),tabSplash:$(this).prop("checked")?1:0,tabSplashWord:$(this).prop("checked")?"On":"Off",messageTitle:"",messageBody:"Tab Info updated for "+$(this).parent().parent().attr("data-name"),error:"Organizr Function: Tab API Connection Failed"},a=$.Callbacks();a.add(buildTabEditor),settingsAPI(e,a)}),$(document).on("change",".pingSwitch",function(){var e={action:"changePing",api:"api/?v1/settings/tab/editor/tabs",id:$(this).parent().parent().attr("data-id"),tab:$(this).parent().parent().attr("data-name"),tabPing:$(this).prop("checked")?1:0,tabPingWord:$(this).prop("checked")?"On":"Off",messageTitle:"",messageBody:"Tab Info updated for "+$(this).parent().parent().attr("data-name"),error:"Organizr Function: Tab API Connection Failed"},a=$.Callbacks();a.add(buildTabEditor),settingsAPI(e,a)}),$(document).on("change",".preloadSwitch",function(){var e={action:"changePreload",api:"api/?v1/settings/tab/editor/tabs",id:$(this).parent().parent().attr("data-id"),tab:$(this).parent().parent().attr("data-name"),tabPreload:$(this).prop("checked")?1:0,tabPreloadWord:$(this).prop("checked")?"On":"Off",messageTitle:"",messageBody:"Tab Info updated for "+$(this).parent().parent().attr("data-name"),error:"Organizr Function: Tab API Connection Failed"},a=$.Callbacks();a.add(buildTabEditor),settingsAPI(e,a)}),$(document).on("change",".defaultSwitch",function(){var e={action:"changeDefault",api:"api/?v1/settings/tab/editor/tabs",id:$(this).parent().parent().parent().attr("data-id"),tab:$(this).parent().parent().parent().attr("data-name"),messageTitle:"",messageBody:"Changed Default Tab to: "+$(this).parent().parent().parent().attr("data-name"),error:"Organizr Function: Tab API Connection Failed"},a=$.Callbacks();a.add(buildTabEditor),settingsAPI(e,a)}),$(document).on("click",".deleteTab",function(){var e=$(this);swal({title:window.lang.translate("Delete ")+e.parent().parent().attr("data-name")+"?",icon:"warning",buttons:{cancel:window.lang.translate("No"),confirm:window.lang.translate("Yes")},dangerMode:!0,confirmButtonColor:"#DD6B55"}).then(function(a){if(a){var t={action:"deleteTab",api:"api/?v1/settings/tab/editor/tabs",id:e.parent().parent().attr("data-id"),tab:e.parent().parent().attr("data-name"),messageTitle:"",messageBody:window.lang.translate("Deleted Tab")+": "+e.parent().parent().attr("data-name"),error:"Organizr Function: Tab Editor API Connection Failed"},n=$.Callbacks();n.add(buildTabEditor),settingsAPI(t,n)}})}),$(document).on("click",".editTabButton",function(){$("#edit-tab-form [name=tabName]").val($(this).parent().parent().attr("data-name")),$("#originalTabName").html($(this).parent().parent().attr("data-name")),$("#edit-tab-form [name=tabURL]").val($(this).parent().parent().attr("data-url")),$("#edit-tab-form [name=tabLocalURL]").val($(this).parent().parent().attr("data-local-url")),$("#edit-tab-form [name=pingURL]").val($(this).parent().parent().attr("data-ping-url")),$("#edit-tab-form [name=tabImage]").val($(this).parent().parent().attr("data-image")),$("#edit-tab-form [name=id]").val($(this).parent().parent().attr("data-id")),$("#edit-tab-form [name=tabActionTime]").val(convertMsToMinutes($(this).parent().parent().attr("data-tab-action-time"))),$("#edit-tab-form [name=tabActionType]").val($(this).parent().parent().attr("data-tab-action-type")),$(this).parent().parent().attr("data-url").indexOf("/?v")>0?$("#edit-tab-form [name=tabURL]").prop("disabled","true"):$("#edit-tab-form [name=tabURL]").prop("disabled",null)}),$(document).on("click",".editTab",function(){var e=$("#originalTabName").html(),a={action:"editTab",api:"api/?v1/settings/tab/editor/tabs",id:$("#edit-tab-form [name=id]").val(),tabName:$("#edit-tab-form [name=tabName]").val(),tabImage:$("#edit-tab-form [name=tabImage]").val(),tabURL:$("#edit-tab-form [name=tabURL]").val(),tabLocalURL:$("#edit-tab-form [name=tabLocalURL]").val(),pingURL:$("#edit-tab-form [name=pingURL]").val(),tabActionTime:convertMinutesToMs($("#edit-tab-form [name=tabActionTime]").val()),tabActionType:$("#edit-tab-form [name=tabActionType]").val(),messageTitle:"",messageBody:"Edited Tab "+$("#edit-tab-form [name=tabName]").val(),error:"Organizr Function: Tab Editor API Connection Failed"};if(void 0!==a.id&&""!=a.id||message("Edit Tab Error"," Could not get Tab ID",activeInfo.settings.notifications.position,"#FFF","error","5000"),void 0!==a.tabName&&""!=a.tabName||message("Edit Tab Error"," Please set a Tab Name",activeInfo.settings.notifications.position,"#FFF","warning","5000"),void 0!==a.tabImage&&""!=a.tabImage||message("Edit Tab Error"," Please set a Tab Image",activeInfo.settings.notifications.position,"#FFF","warning","5000"),void 0!==a.tabURL&&""!=a.tabURL||void 0!==a.tabLocalURL&&""!=a.tabLocalURL||message("Edit Tab Error"," Please set a Tab URL or Local URL",activeInfo.settings.notifications.position,"#FFF","warning","5000"),checkIfTabNameExists(a.tabName)&&e!==a.tabName)return message("Edit Tab Error"," Tab name already used",activeInfo.settings.notifications.position,"#FFF","warning","5000"),!1;if(""!==a.id&&""!==a.tabName&&""!==a.tabImage){var t=$.Callbacks();t.add(buildTabEditor),settingsAPI(a,t),clearForm("#edit-tab-form"),$.magnificPopup.close()}}),$(document).on("click",".addNewTab",function(){var e={action:"addNewTab",api:"api/?v1/settings/tab/editor/tabs",tabOrder:parseInt($("#tabEditorTable").find("tr[data-order]").last().attr("data-order"))+1,tabName:$("#new-tab-form [name=tabName]").val(),tabImage:$("#new-tab-form [name=tabImage]").val(),tabURL:$("#new-tab-form [name=tabURL]").val(),tabLocalURL:$("#new-tab-form [name=tabLocalURL]").val(),pingURL:$("#new-tab-form [name=pingURL]").val(),tabActionTime:convertMinutesToMs($("#new-tab-form [name=tabActionTime]").val()),tabActionType:$("#new-tab-form [name=tabActionType]").val(),tabGroupID:1,tabEnabled:0,tabDefault:0,tabType:1,messageTitle:"Created Tab "+$("#new-tab-form [name=tabName]").val(),messageBody:'Please <a href="javascript:void(0)" onclick="window.location.reload(false);">RELOAD</a> page to update',error:"Organizr Function: Tab API Connection Failed"};if(void 0!==e.tabOrder&&""!=e.tabOrder||message("New Tab Error"," Could not get next Group ID",activeInfo.settings.notifications.position,"#FFF","error","5000"),void 0!==e.tabName&&""!=e.tabName||message("New Tab Error"," Please set a Tab Name",activeInfo.settings.notifications.position,"#FFF","error","5000"),void 0!==e.tabURL&&""!=e.tabURL||void 0!==e.tabLocalURL&&""!=e.tabLocalURL||message("New Tab Error"," Please set a Tab URL or Local URL",activeInfo.settings.notifications.position,"#FFF","warning","5000"),void 0!==e.tabImage&&""!=e.tabImage||message("New Tab Error"," Please set a Tab Image",activeInfo.settings.notifications.position,"#FFF","warning","5000"),checkIfTabNameExists(e.tabName))return message("New Tab Error"," Tab name already used",activeInfo.settings.notifications.position,"#FFF","warning","5000"),!1;if(""!==e.tabOrder&&""!==e.tabName&&(""!==e.tabURL||""!==e.tabLocalURL)&&""!==e.tabImage){var a=$.Callbacks();a.add(buildTabEditor),settingsAPI(e,a),clearForm("#new-tab-form"),$.magnificPopup.close()}}),$(document).on("click",".addNewCategory",function(){var e=[];$($("#categoryEditorTable").find("tr[data-category-id]")).each(function(){e.push($(this).attr("data-category-id"))});var a={action:"addNewCategory",api:"api/?v1/settings/tab/editor/categories",categoryOrder:parseInt($("#categoryEditorTable").find("tr[data-order]").last().attr("data-order"))+1,categoryName:$("#new-category-form [name=name]").val(),categoryImage:$("#new-category-form [name=image]").val(),categoryID:Math.max.apply(null,e)+1,categoryDefault:0,messageTitle:"",messageBody:"Created Category "+$("#new-category-form [name=name]").val(),error:"Organizr Function: API Connection Failed"};if(console.log(a),void 0!==a.categoryID&&""!=a.categoryID||message("New Category Error"," Could not get next Category ID",activeInfo.settings.notifications.position,"#FFF","error","5000"),void 0!==a.categoryName&&""!=a.categoryName||message("New Category Error"," Please set a Category Name",activeInfo.settings.notifications.position,"#FFF","error","5000"),void 0!==a.categoryOrder&&""!=a.categoryOrder||message("New Category Error"," Could not get Category Order",activeInfo.settings.notifications.position,"#FFF","warning","5000"),void 0!==a.categoryImage&&""!=a.categoryImage||message("New Category Error"," Please set a Category Image",activeInfo.settings.notifications.position,"#FFF","warning","5000"),""!==a.categoryID&&""!==a.categoryName&&""!==a.categoryOrder&&""!==a.categoryImage){var t=$.Callbacks();t.add(buildCategoryEditor),settingsAPI(a,t),clearForm("#new-category-form"),$.magnificPopup.close()}}),$(document).on("click",".deleteCategory",function(){var e=$(this);swal({title:window.lang.translate("Delete ")+e.parent().parent().attr("data-name")+"?",icon:"warning",buttons:{cancel:window.lang.translate("No"),confirm:window.lang.translate("Yes")},dangerMode:!0,confirmButtonColor:"#DD6B55"}).then(function(a){if(a){var t={action:"deleteCategory",api:"api/?v1/settings/tab/editor/categories",id:e.parent().parent().attr("data-id"),category:e.parent().parent().attr("data-name"),messageTitle:"",messageBody:window.lang.translate("Deleted Category")+": "+e.parent().parent().attr("data-name"),error:"Organizr Function: API Connection Failed"},n=$.Callbacks();n.add(buildCategoryEditor),settingsAPI(t,n)}})}),$(document).on("click",".editCategoryButton",function(){$("#edit-category-form [name=name]").val($(this).parent().parent().attr("data-name")),$("#edit-category-form [name=image]").val($(this).parent().parent().attr("data-image")),$("#edit-category-form [name=id]").val($(this).parent().parent().attr("data-id"))}),$(document).on("click",".editCategory",function(){var e={action:"editCategory",api:"api/?v1/settings/tab/editor/categories",id:$("#edit-category-form [name=id]").val(),name:$("#edit-category-form [name=name]").val(),image:$("#edit-category-form [name=image]").val(),messageTitle:"",messageBody:"Edited Category "+$("#edit-category-form [name=name]").val(),error:"Organizr Function: API Connection Failed"};if(console.log(e),void 0!==e.id&&""!=e.id||message("Edit Tab Error"," Could not get Tab ID",activeInfo.settings.notifications.position,"#FFF","error","5000"),void 0!==e.name&&""!=e.name||message("Edit Tab Error"," Please set a Tab Name",activeInfo.settings.notifications.position,"#FFF","warning","5000"),void 0!==e.image&&""!=e.image||message("Edit Tab Error"," Please set a Tab Image",activeInfo.settings.notifications.position,"#FFF","warning","5000"),""!==e.id&&""!==e.name&&""!==e.image){var a=$.Callbacks();a.add(buildCategoryEditor),settingsAPI(e,a),clearForm("#edit-category-form"),$.magnificPopup.close()}}),$(document).on("click",".changeDefaultCategory",function(){var e={action:"changeDefault",
api:"api/?v1/settings/tab/editor/categories",id:$(this).parent().parent().attr("data-id"),oldCategoryName:$("#categoryEditorTable").find("tr[data-default=true]").attr("data-name"),newCategoryName:$(this).parent().parent().attr("data-name"),messageTitle:"",messageBody:"Changed Default Category to "+$(this).parent().parent().attr("data-name"),error:"Organizr Function: API Connection Failed"},a=$.Callbacks();a.add(buildCategoryEditor),settingsAPI(e,a)}),$(document).on("click",".saveCss",function(){$(".cssTextarea").val(cssEditor.getValue()).trigger("change")}),$(document).on("click",".saveThemeCss",function(){$(".cssThemeTextarea").val(cssThemeEditor.getValue()).trigger("change")}),$(document).on("click",".saveJava",function(){$(".javaTextarea").val(javaEditor.getValue()).trigger("change")}),$(document).on("click",".saveThemeJava",function(){$(".javaThemeTextarea").val(javaThemeEditor.getValue()).trigger("change")}),$(document).on("click",".savecustomHTMLoneTextarea",function(){$(".customHTMLoneTextarea").val(customHTMLoneEditor.getValue()).trigger("change")}),$(document).on("click",".savecustomHTMLtwoTextarea",function(){$(".customHTMLtwoTextarea").val(customHTMLtwoEditor.getValue()).trigger("change")}),$(document).on("focusout","input.pick-a-color",function(e){var a=$(this).attr("data-original"),t=$(this).val();a!==t&&"#987654"!==t&&""!==t?($(this).change(),$(this).attr("data-original",t)):""==t&&$(this).attr("style","")}),$(document).on("change keydown",".addFormTick :input",function(e){$(this).attr("data-changed",!0),$(this).closest(".form-group").addClass("has-success");var a=$(this).closest("form").attr("id");switch($("#"+a+"-save").removeClass("hidden"),$(this).attr("type")){case"switch":case"checkbox":var t=!!$(this).prop("checked");break;default:t=$(this).val()}$(this).hasClass("themeChanger")&&changeTheme(t),$(this).hasClass("styleChanger")&&changeStyle(t),$(this).hasClass("notifyChanger")&&(activeInfo.settings.notifications.backbone=t,defineNotification()),$(this).hasClass("notifyPositionChanger")&&(activeInfo.settings.notifications.position=t),$(this).hasClass("authDebug")&&(activeInfo.settings.misc.authDebug=t)}),$(document).on("click",".deleteImage",function(){var e=$(this);swal({title:window.lang.translate("Delete ")+e.attr("data-image-name")+"?",icon:"warning",buttons:{cancel:window.lang.translate("No"),confirm:window.lang.translate("Yes")},dangerMode:!0,confirmButtonColor:"#DD6B55"}).then(function(a){if(a){var t={action:"deleteImage",api:"api/?v1/settings/image/manager/view",imageName:e.attr("data-image-name"),imagePath:e.attr("data-image-path"),messageTitle:"",messageBody:window.lang.translate("Deleted Image")+": "+e.attr("data-image-name"),error:"Organizr Function: User API Connection Failed"},n=$.Callbacks();n.add(buildImageManagerView),settingsAPI(t,n)}})}),$(document).on("click",".reload",function(){location.reload()}),$(document).on("click",".enablePlugin",function(){var e={action:"enable",api:"api/?v1/settings/plugins/list",name:$(this).attr("data-plugin-name"),configName:$(this).attr("data-config-name"),messageTitle:"",messageBody:"Enabling "+$(this).attr("data-plugin-name"),error:"Organizr Function: API Connection Failed"},a=$.Callbacks();settingsAPI(e,a),ajaxloader(".content-wrap","in"),setTimeout(function(){buildPlugins(),ajaxloader()},3e3)}),$(document).on("click",".disablePlugin",function(){var e=$(this);swal({title:window.lang.translate("Disable")+" "+e.attr("data-plugin-name")+"?",icon:"warning",buttons:{cancel:window.lang.translate("No"),confirm:window.lang.translate("Yes")},dangerMode:!0,confirmButtonColor:"#DD6B55"}).then(function(a){if(a){var t={action:"disable",api:"api/?v1/settings/plugins/list",name:e.attr("data-plugin-name"),configName:e.attr("data-config-name"),messageTitle:"",messageBody:"Disabling "+e.attr("data-plugin-name"),error:"Organizr Function: API Connection Failed"},n=$.Callbacks();settingsAPI(t,n),ajaxloader(".content-wrap","in"),setTimeout(function(){buildPlugins(),ajaxloader()},3e3)}})}),$(document).on("change","#authSelect, #authBackendSelect",function(e){changeAuth()}),$(document).on("click",".getSSOPlexToken",function(){$(".ssoPlexTokenMessage").text("Grabbing Token"),$(".ssoPlexTokenHeader").addClass("panel-info").removeClass("panel-warning").removeClass("panel-danger");var e=$("#sso-plex-token-form [name=username]").val().trim(),a=$("#sso-plex-token-form [name=password]").val().trim();""!==a&&""!==a?$.ajax({type:"POST",headers:{"X-Plex-Product":"Organizr","X-Plex-Version":"2.0","X-Plex-Client-Identifier":"01010101-10101010"},url:"https://plex.tv/users/sign_in.json",data:{"user[login]":e,"user[password]":a,force:!0},cache:!1,async:!0,complete:function(e,a){var t=$.parseJSON(e.responseText);201===e.status?($(".ssoPlexTokenMessage").text(e.statusText),$(".ssoPlexTokenHeader").addClass("panel-success").removeClass("panel-info").removeClass("panel-warning").removeClass("panel-danger"),$("#sso-form [name=plexToken]").val(t.user.authToken),$("#sso-form [name=plexToken]").change()):($(".ssoPlexTokenMessage").text(e.statusText),$(".ssoPlexTokenHeader").addClass("panel-danger").removeClass("panel-info").removeClass("panel-warning"))}}):($(".ssoPlexTokenMessage").text("Enter Username and Password"),$(".ssoPlexTokenHeader").addClass("panel-warning").removeClass("panel-info").removeClass("panel-danger"))}),$(document).on("click",".getPlexMachineSSO",function(){var e=$("#sso-form [name=plexToken]").val().trim();""!==e?($(".ssoPlexMachineMessage").text("Grabbing List"),$(".ssoPlexMachineHeader").addClass("panel-info").removeClass("panel-warning").removeClass("panel-danger"),$.ajax({type:"GET",headers:{"X-Plex-Product":"Organizr","X-Plex-Version":"2.0","X-Plex-Client-Identifier":"01010101-10101010","X-Plex-Token":e},url:"https://plex.tv/pms/servers.xml",cache:!1,async:!0,complete:function(e,a){var t=$.parseXML(e.responseText);if(200===e.status){$(".ssoPlexMachineMessage").text("Choose Plex Server"),$(".ssoPlexMachineHeader").addClass("panel-success").removeClass("panel-info").removeClass("panel-warning");var n='<option lang="en">Choose Plex Machine</option>';$("Server",t).each(function(){if(1==$(this).attr("owned")){var e=$(this).attr("name"),a=$(this).attr("machineIdentifier");e=e+" ["+a+"]",n+='<option value="'+a+'">'+e+"</option>"}});var o='<select class="form-control" id="ssoPlexMachineSelector" data-type="select">'+n+"</select>";$(".ssoPlexMachineListing").html(o)}else $(".ssoPlexTokenMessage").text(e.statusText),$(".ssoPlexTokenHeader").addClass("panel-danger").removeClass("panel-info").removeClass("panel-warning")}})):($(".ssoPlexMachineMessage").text("Plex Token Needed"),$(".ssoPlexMachineHeader").addClass("panel-warning").removeClass("panel-info").removeClass("panel-danger"))}),$(document).on("change","#ssoPlexMachineSelector",function(e){$("#sso-form [name=plexID]").val($(this).val()),$("#sso-form [name=plexID]").change()}),$(document).on("click",".getauthPlexToken",function(){$(".authPlexTokenMessage").text("Grabbing Token"),$(".authPlexTokenHeader").addClass("panel-info").removeClass("panel-warning").removeClass("panel-danger");var e=$("#auth-plex-token-form [name=username]").val().trim(),a=$("#auth-plex-token-form [name=password]").val().trim();""!==a&&""!==a?$.ajax({type:"POST",headers:{"X-Plex-Product":"Organizr","X-Plex-Version":"2.0","X-Plex-Client-Identifier":"01010101-10101010"},url:"https://plex.tv/users/sign_in.json",data:{"user[login]":e,"user[password]":a,force:!0},cache:!1,async:!0,complete:function(e,a){var t=$.parseJSON(e.responseText);201===e.status?($(".authPlexTokenMessage").text(e.statusText),$(".authPlexTokenHeader").addClass("panel-success").removeClass("panel-info").removeClass("panel-warning").removeClass("panel-danger"),$("#settings-main-form [name=plexToken]").val(t.user.authToken),$("#settings-main-form [name=plexToken]").change()):($(".authPlexTokenMessage").text(e.statusText),$(".authPlexTokenHeader").addClass("panel-danger").removeClass("panel-info").removeClass("panel-warning"))}}):($(".authPlexTokenMessage").text("Enter Username and Password"),$(".authPlexTokenHeader").addClass("panel-warning").removeClass("panel-info").removeClass("panel-danger"))}),$(document).on("click",".getPlexMachineAuth",function(){var e=$("#settings-main-form [name=plexToken]").val().trim();""!==e?($(".authPlexMachineMessage").text("Grabbing List"),$(".authPlexMachineHeader").addClass("panel-info").removeClass("panel-warning").removeClass("panel-danger"),$.ajax({type:"GET",headers:{"X-Plex-Product":"Organizr","X-Plex-Version":"2.0","X-Plex-Client-Identifier":"01010101-10101010","X-Plex-Token":e},url:"https://plex.tv/pms/servers.xml",cache:!1,async:!0,complete:function(e,a){var t=$.parseXML(e.responseText);if(200===e.status){$(".authPlexMachineMessage").text("Choose Plex Server"),$(".authPlexMachineHeader").addClass("panel-success").removeClass("panel-info").removeClass("panel-warning");var n='<option lang="en">Choose Plex Machine</option>';$("Server",t).each(function(){if(1==$(this).attr("owned")){var e=$(this).attr("name"),a=$(this).attr("machineIdentifier");e=e+" ["+a+"]",n+='<option value="'+a+'">'+e+"</option>"}});var o='<select class="form-control" id="authPlexMachineSelector" data-type="select">'+n+"</select>";$(".authPlexMachineListing").html(o)}else $(".authPlexTokenMessage").text(e.statusText),$(".authPlexTokenHeader").addClass("panel-danger").removeClass("panel-info").removeClass("panel-warning")}})):($(".authPlexMachineMessage").text("Plex Token Needed"),$(".authPlexMachineHeader").addClass("panel-warning").removeClass("panel-info").removeClass("panel-danger"))}),$(document).on("change","#authPlexMachineSelector",function(e){$("#settings-main-form [name=plexID]").val($(this).val()),$("#settings-main-form [name=plexID]").change()}),$(document).on("click",".closeErrorPage",function(){$(".error-page").html(""),$(".error-page").fadeOut()}),$(document).on("click",".testPath",function(){var e=$("#form-location").val();void 0===e||""==e?message("Path Error"," Please enter a path for DB",activeInfo.settings.notifications.position,"#FFF","warning","10000"):organizrAPI("POST","api/?v1/wizard_path",{path:e}).success(function(e){var a=JSON.parse(e);console.log(a),1==a.data?message("Path"," Path is good to go",activeInfo.settings.notifications.position,"#FFF","success","10000"):message("Path Error"," Path is not writable",activeInfo.settings.notifications.position,"#FFF","warning","10000")}).fail(function(e){console.error("Organizr Function: Connection Failed")})}),$(document).on({mouseenter:function(){$(this).find(".progress").toggleClass("progress-lg"),$(this).find(".progress").find("span").toggleClass("hidden"),$(this).find(".white-box").toggleClass("nowPlayingHover")},mouseleave:function(){$(this).find(".progress").toggleClass("progress-lg"),$(this).find(".progress").find("span").toggleClass("hidden"),$(this).find(".white-box").toggleClass("nowPlayingHover")}},".nowPlayingItem"),$(document).on("click",".recent-filter li>a",function(){var e=$(this).attr("data-filter"),a=$(this).attr("server-filter");"all"==e?$("."+a+"-recent").find(".recent-item").parent().removeClass("hidden"):($("."+a+"-recent").find(".recent-item").parent().removeClass("hidden"),$("."+a+"-recent").find(".recent-item:not(."+e+")").parent().addClass("hidden"));var t=$("."+a+"-recent");t.owlCarousel(),t.trigger("refresh.owl.carousel"),t.trigger("to.owl.carousel",0)}),$(document).on("click",".filter-request-result",function(){var e=$(this).attr("data-filter");"request-result-all"==e?$(".request-result-item").removeClass("hidden"):($(".request-result-item").addClass("hidden"),$("."+e).removeClass("hidden"))}),$(document).on("click",".playlist-filter li>a",function(){var e=$(this).attr("data-filter"),a=$(this).attr("data-filter")+"-playlist",t=decodeURI($(this).attr("data-title")),n=$(this).attr("server-filter");$("."+n+"-playlistTitle").html(t),$("."+n+"-playlist").addClass("hidden"),$("."+e+"-playlist").removeClass("hidden"),$(".playlist-next").attr("onclick","owlChange('"+a+"','next');"),$(".playlist-previous").attr("onclick","owlChange('"+a+"','previous');")}),$(document).on("click",".refreshImage",function(e){message(""," Refreshing Image...",activeInfo.settings.notifications.position,"#FFF","success","1000"),e.preventDefault;var a=$(this).attr("data-image"),t=$(this).attr("data-type");switch(t){case"nowPlaying":var n=$(this).parent().parent().parent().parent().find(".imageSource");n.attr("src",a);break;case"recent-item":var o=$(this).parent().parent().parent().find(".imageSourceAlt");n=$(this).parent().parent().parent().parent().find(".imageSource");n.attr("style",'background-image: url("'+a+'");'),o.attr("src",a)}setTimeout(function(){message("Image Refreshed "," Clear Cache Please",activeInfo.settings.notifications.position,"#FFF","success","3000")},1e3)}),$(document).on("click",".openTab",function(e){if("true"===$(this).attr("data-open-tab")){var a=$(this).attr("data-tab-name"),t=$("#container-"+a),n=t.children("iframe");1===n.length?($("#menu-"+a+" a").trigger("click"),n.attr("src",$(this).attr("data-url"))):(t.attr("data-url",$(this).attr("data-url")),$("#menu-"+a+" a").trigger("click"))}else{var o=$(this).attr("data-url");window.open(o,"_blank")}$.magnificPopup.close()}),$(document).on("click",".request-item",function(e){var a=$(this).attr("data-target");$("#link-"+a).trigger("click")}),$(document).on("click",".metadata-get",function(e){if(!$(e.target).hasClass("mdi-refresh")){$("#preloader").fadeIn();var a=$(this).attr("data-key"),t=$(this).attr("data-uid"),n=$(this).attr("data-source");switch(n){case"plex":var o="getPlexMetadata";break;case"emby":case"jellyfin":o="getEmbyMetadata"}ajaxloader(".content-wrap","in"),organizrAPI("POST","api/?v1/homepage/connect",{action:o,key:a}).success(function(e){var a=JSON.parse(e);$("."+t+"-metadata-info").html(""),$("."+t+"-metadata-info").html(buildMetadata(a.data,n)),$("."+t).trigger("click"),$(".metadata-actors").owlCarousel({autoplay:!0,slideSpeed:300,paginationSpeed:400,nav:!1,dots:!1,margin:10,autoWidth:!0,items:4})}).fail(function(e){console.error("Organizr Function: API Connection Failed")}),ajaxloader(),$("#preloader").fadeOut()}}),$(document).on("click",".downloader",function(e){var a=$(this).attr("data-action"),t=$(this).attr("data-source"),n=$(this).attr("data-target");ajaxloader(".content-wrap","in"),organizrAPI("POST","api/?v1/downloader",{action:a,source:t,target:n}).success(function(e){JSON.parse(e);homepageDownloader(t)}).fail(function(e){console.error("Organizr Function: API Connection Failed")}),ajaxloader()}),$(document).on("click",".testTab",function(){var e=$("#new-tab-form-inputURLNew");if(""==e.val()&&message("","Please enter a URL",activeInfo.settings.notifications.position,"#FFF","warning","5000"),""!==e.val()){var a={url:e.val()};organizrAPI("POST","api/?v1/test/iframe",a).success(function(e){var a=JSON.parse(e);1==a.data?($(".tabTestMessage.alert-success").removeClass("hidden"),$(".tabTestMessage.alert-danger").addClass("hidden")):($(".tabTestMessage.alert-danger").removeClass("hidden"),$(".tabTestMessage.alert-success").addClass("hidden"))}).fail(function(e){console.error("Organizr Function: Check Failed")})}}),$(document).on("click",".testEditTab",function(){var e=$("#edit-tab-form-inputURL");if(""==e.val()&&message("","Please enter a URL",activeInfo.settings.notifications.position,"#FFF","warning","5000"),""!==e.val()){var a={url:e.val()};organizrAPI("POST","api/?v1/test/iframe",a).success(function(e){var a=JSON.parse(e);1==a.data?($(".tabEditTestMessage.alert-success").removeClass("hidden"),$(".tabEditTestMessage.alert-danger").addClass("hidden")):($(".tabEditTestMessage.alert-danger").removeClass("hidden"),$(".tabEditTestMessage.alert-success").addClass("hidden"))}).fail(function(e){console.error("Organizr Function: Check Failed")})}}),$(document).on("click",".newAPIKey",function(){$("#settings-main-form [name=organizrAPI]").val(generateCode()),$("#settings-main-form [name=organizrAPI]").change()}),$(document).on("click",".purgeLog",function(){var e=$(".swapLog.active").attr("data-name"),a=$(".swapLog.active").attr("data-path");""!==e&&""!==a&&(removeFile(a,e),setTimeout(function(){loadSettingsPage("api/?v1/settings/settings/logs","#settings-settings-logs","Log Viewer")},1500))}),$(document).on("click",".showPassword",function(){var e=$(this).parent().parent().find(".password-alt");"password"===e.attr("type")?e.attr("type","text"):e.attr("type","password"),$(this).find(".passwordToggle").toggleClass("fa-eye").toggleClass("fa-eye-slash")}),$(document).on("click",".emailUser",function(){var e=$(this).parent().parent().attr("data-email");1==activeInfo.plugins["PHPMAILER-enabled"]?($(".emailModal").click(),$("#sendEmailToInput").val(e)):message("Email","Plugin not setup",activeInfo.settings.notifications.position,"#FFF","warning","5000")}),$(document).on("click","a[class*=ID-]",function(){var e=$(this).attr("data-details"),a=$(this).attr("data-target")+"-metadata-info",t=JSON.parse(e);$("."+a).html(buildCalendarMetadata(t)),myLazyLoad.update()}),$(document).on("change",".filter-request-input",function(){$(".request-item").parent().removeClass("hidden");var e=[];$(".filter-request-input").each(function(){var a=$(this).prop("checked"),t=$(this).attr("data-filter");0==a&&e.push("."+t)}),$(".request-item").each(function(){var a=$(this),t=e.join(", ");a.is(t)&&a.parent().addClass("hidden")});var a=$(".request-items");a.owlCarousel(),a.trigger("refresh.owl.carousel"),a.trigger("to.owl.carousel",0)}),$(document).on("keyup","#request-input",function(){clearTimeout(typingTimer),typingTimer=setTimeout(doneTyping,750)}),$(document).on("keyup","#mediaSearchQuery",function(){clearTimeout(typingTimer),typingTimer=setTimeout(doneTypingMediaSearch,750)}),$(document).on("keydown","#request-input",function(){clearTimeout(typingTimer)}),$(document).on("keydown","#mediaSearchQuery",function(){clearTimeout(typingTimer)}),$(document).on("keydown","body",function(){blockDev()}),$(document).on("click",".right-side-toggle",function(){$(".right-sidebar").slideDown(50).toggleClass("shw-rside"),$(".fxhdr").on("click",function(){$("body").toggleClass("fix-header")}),$(".fxsdr").on("click",function(){$("body").toggleClass("fix-sidebar")});var e=$(".fxhdr");$("body").hasClass("fix-header")?e.attr("checked",!0):e.attr("checked",!1)}),$(document).on("mousewheel",".recent-items .owl-stage",function(e){e.shiftKey&&(e.deltaY>0?$(".recent-items").trigger("next.owl"):$(".recent-items").trigger("prev.owl"),e.preventDefault())}),$(document).on("mousewheel",".playlist-items .owl-stage",function(e){e.shiftKey&&(e.deltaY>0?$(".playlist-items").trigger("next.owl"):$(".playlist-items").trigger("prev.owl"),e.preventDefault())}),$(document).on("mousewheel",".request-items .owl-stage",function(e){e.shiftKey&&(e.deltaY>0?$(".request-items").trigger("next.owl"):$(".request-items").trigger("prev.owl"),e.preventDefault())}),Mousetrap.bind("r r",function(){reloadCurrentTab()}),Mousetrap.bind("c c",function(){closeCurrentTab()}),Mousetrap.bind("s s",function(){openSettings()}),Mousetrap.bind("h h",function(){openHomepage()}),Mousetrap.bind("f f",function(){toggleFullScreen()}),Mousetrap.bind("d d",function(){toggleDebug()}),Mousetrap.bind("esc",function(){$(".splash-screen").removeClass("in").addClass("hidden")}),Mousetrap.bind("ctrl+shift+up",function(e){var a=$(".allTabsList a.active").parent(),t=a.prev().children();return t.trigger("click"),parent.focus(),!1}),Mousetrap.bind("ctrl+shift+down",function(e){var a=$(".allTabsList a.active").parent(),t=a.next().children();return t.trigger("click"),!1}),$(document).on("change","#new-tab-form-chooseImage",function(e){var a=$("#new-tab-form-chooseImage").val();"Select or type Icon"!==a&&$("#new-tab-form-inputImageNew").val(a)}),$(document).on("change","#edit-tab-form-chooseImage",function(e){var a=$("#edit-tab-form-chooseImage").val();"Select or type Icon"!==a&&$("#edit-tab-form-inputImage").val(a)}),$(document).on("change","#new-tab-form-chooseIcon",function(e){var a=$("#new-tab-form-chooseIcon").val();"Select or type Icon"!==a&&$("#new-tab-form-inputImageNew").val(a)}),$(document).on("change","#edit-tab-form-chooseIcon",function(e){var a=$("#edit-tab-form-chooseIcon").val();"Select or type Icon"!==a&&$("#edit-tab-form-inputImage").val(a)}),$(document).on("change","#choose-calender-filter, #choose-calender-filter-status",function(e){filter=$("#choose-calender-filter").val(),filterDownload=$("#choose-calender-filter-status").val(),$("#calendar-filter-modal").modal("hide"),console.log("Calendar Filter: "+filter),console.log("Calendar Filter: "+filterDownload),$("#calendar").fullCalendar("rerenderEvents"),new SimpleBar($(".fc-scroller")[0])}),$("#debug-input").keyup(function(e){13==e.keyCode&&orgDebug()}),$(document).on("click",".sticon",function(){var e=$(this).attr("href"),a=$(e).find(".customtab2 > li");if(0!==a.length){var t=!1;if($(a).each(function(e,a){var n=$(this).hasClass("active");n&&(t=!0)}),0==t){let e=$(a).find("a").first();$(e).trigger("click")}}}),$(document).on("click",".help-modal",function(){var e=$(this).attr("data-modal"),a="",t="";switch($("#help-modal-title").html(""),$("#help-modal-body").html(""),e){case"tabs":a="Tab Help";var n=[{title:"Name",body:"The text that will be displayed for that certain tab"},{title:"Category",body:"Each Tab is assigned a Category, the default is unsorted.  You may create new categories on the Category settings tab"},{title:"Group",body:"The lowest Group that will have access to this tab"},{title:"Type",body:"Internal is for Organizr pages<br/>iFrame is for all others<br/>New Window is for items to open in a new window"},{title:"Default",body:"You can choose one tab to be the first opened tab on page load"},{title:"Active",body:"Either mark a tab as active or inactive"},{title:"Splash",body:"Toggle this to add the tab to the Splash Page on page load"},{title:"Ping",body:"Enable Organizr to ping the status of the local URL of this tab"},{title:"Preload",body:"Toggle this tab to loaded in the background on page load"}];t=buildAccordion(n);break;default:return null}$("#help-modal-title").html(a),$("#help-modal-body").html(t),$(".help-modal-lg").modal("show")}),$(document).on("click",".close-popup",function(){$.magnificPopup.close()}),$(document).on("click",".copyDebug",function(){copyDebug(),$("#internal-clipboard").trigger("click")}),$(document).on("keyup","#authBackendHostPrefix-input, #authBackendHostSuffix-input",function(){var e=$("#authBackendHostPrefix-input").val()+"TestAcct"+$("#authBackendHostSuffix-input").val();$("#accountDN").html(e)}),$(document).on("click",".showMoreHealth",function(){var e=$(this).attr("data-id");$(".showMoreHealthDiv-"+e).toggleClass("d-none"),$(this).find(".card-body").toggleClass("healthPosition")}),$(document).on("click",".ipInfo",function(){$.getJSON("https://ipinfo.io/"+$(this).text()+"/?token=ddd0c072ad5021",function(e){var a=void 0===e.region?" N/A":e.region,t=void 0===e.ip?" N/A":e.ip,n=void 0===e.hostname?" N/A":e.hostname,o=void 0===e.loc?" N/A":e.loc,i=void 0===e.org?" N/A":e.org,r=void 0===e.city?" N/A":e.city,s=void 0===e.country?" N/A":e.country,l=void 0===e.phone?" N/A":e.phone,c='<div class="row"><div class="col-lg-12"><div class="white-box"><h3 class="box-title">'+t+'</h3><div class="table-responsive"><table class="table"><tbody><tr><td class="text-left">Hostname</td><td class="txt-oflo text-right">'+n+'</td></tr><tr><td class="text-left">Location</td><td class="txt-oflo text-right">'+o+'</td></tr><tr><td class="text-left">Org</td><td class="txt-oflo text-right">'+i+'</td></tr><tr><td class="text-left">City</td><td class="txt-oflo text-right">'+r+'</td></tr><tr><td class="text-left">Country</td><td class="txt-oflo text-right">'+s+'</td></tr><tr><td class="text-left">Phone</td><td class="txt-oflo text-right">'+l+'</td></tr><tr><td class="text-left">Region</td><td class="txt-oflo text-right">'+a+"</td></tr></tbody></table></div></div></div></div>";swal({content:createElementFromHTML(c),buttons:!1,className:"bg-org"})})}),$(document).on("click",".allGroupsList",function(){console.log($(this)),$(this).toggleClass("active")});